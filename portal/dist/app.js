(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))s(l);new MutationObserver(l=>{for(const i of l)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&s(o)}).observe(document,{childList:!0,subtree:!0});function n(l){const i={};return l.integrity&&(i.integrity=l.integrity),l.referrerPolicy&&(i.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?i.credentials="include":l.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function s(l){if(l.ep)return;l.ep=!0;const i=n(l);fetch(l.href,i)}})();var Q,v,We,F,Ce,Ie,je,Oe,pe,oe,ce,Be,G={},qe=[],ut=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,X=Array.isArray;function H(e,t){for(var n in t)e[n]=t[n];return e}function me(e){e&&e.parentNode&&e.parentNode.removeChild(e)}function Re(e,t,n){var s,l,i,o={};for(i in t)i=="key"?s=t[i]:i=="ref"?l=t[i]:o[i]=t[i];if(arguments.length>2&&(o.children=arguments.length>3?Q.call(arguments,2):n),typeof e=="function"&&e.defaultProps!=null)for(i in e.defaultProps)o[i]===void 0&&(o[i]=e.defaultProps[i]);return z(e,o,s,l,null)}function z(e,t,n,s,l){var i={type:e,props:t,key:n,ref:s,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:l??++We,__i:-1,__u:0};return l==null&&v.vnode!=null&&v.vnode(i),i}function q(e){return e.children}function K(e,t){this.props=e,this.context=t}function B(e,t){if(t==null)return e.__?B(e.__,e.__i+1):null;for(var n;t<e.__k.length;t++)if((n=e.__k[t])!=null&&n.__e!=null)return n.__e;return typeof e.type=="function"?B(e):null}function Ve(e){var t,n;if((e=e.__)!=null&&e.__c!=null){for(e.__e=e.__c.base=null,t=0;t<e.__k.length;t++)if((n=e.__k[t])!=null&&n.__e!=null){e.__e=e.__c.base=n.__e;break}return Ve(e)}}function de(e){(!e.__d&&(e.__d=!0)&&F.push(e)&&!ie.__r++||Ce!=v.debounceRendering)&&((Ce=v.debounceRendering)||Ie)(ie)}function ie(){for(var e,t,n,s,l,i,o,c=1;F.length;)F.length>c&&F.sort(je),e=F.shift(),c=F.length,e.__d&&(n=void 0,s=void 0,l=(s=(t=e).__v).__e,i=[],o=[],t.__P&&((n=H({},s)).__v=s.__v+1,v.vnode&&v.vnode(n),ge(t.__P,n,s,t.__n,t.__P.namespaceURI,32&s.__u?[l]:null,i,l??B(s),!!(32&s.__u),o),n.__v=s.__v,n.__.__k[n.__i]=n,Ge(i,n,o),s.__e=s.__=null,n.__e!=l&&Ve(n)));ie.__r=0}function ze(e,t,n,s,l,i,o,c,u,d,_){var a,h,p,g,x,b,f,m=s&&s.__k||qe,$=t.length;for(u=_t(n,t,m,u,$),a=0;a<$;a++)(p=n.__k[a])!=null&&(h=p.__i==-1?G:m[p.__i]||G,p.__i=a,b=ge(e,p,h,l,i,o,c,u,d,_),g=p.__e,p.ref&&h.ref!=p.ref&&(h.ref&&be(h.ref,null,p),_.push(p.ref,p.__c||g,p)),x==null&&g!=null&&(x=g),(f=!!(4&p.__u))||h.__k===p.__k?u=Ke(p,u,e,f):typeof p.type=="function"&&b!==void 0?u=b:g&&(u=g.nextSibling),p.__u&=-7);return n.__e=x,u}function _t(e,t,n,s,l){var i,o,c,u,d,_=n.length,a=_,h=0;for(e.__k=new Array(l),i=0;i<l;i++)(o=t[i])!=null&&typeof o!="boolean"&&typeof o!="function"?(u=i+h,(o=e.__k[i]=typeof o=="string"||typeof o=="number"||typeof o=="bigint"||o.constructor==String?z(null,o,null,null,null):X(o)?z(q,{children:o},null,null,null):o.constructor==null&&o.__b>0?z(o.type,o.props,o.key,o.ref?o.ref:null,o.__v):o).__=e,o.__b=e.__b+1,c=null,(d=o.__i=ht(o,n,u,a))!=-1&&(a--,(c=n[d])&&(c.__u|=2)),c==null||c.__v==null?(d==-1&&(l>_?h--:l<_&&h++),typeof o.type!="function"&&(o.__u|=4)):d!=u&&(d==u-1?h--:d==u+1?h++:(d>u?h--:h++,o.__u|=4))):e.__k[i]=null;if(a)for(i=0;i<_;i++)(c=n[i])!=null&&!(2&c.__u)&&(c.__e==s&&(s=B(c)),Ye(c,c));return s}function Ke(e,t,n,s){var l,i;if(typeof e.type=="function"){for(l=e.__k,i=0;l&&i<l.length;i++)l[i]&&(l[i].__=e,t=Ke(l[i],t,n,s));return t}e.__e!=t&&(s&&(t&&e.type&&!t.parentNode&&(t=B(e)),n.insertBefore(e.__e,t||null)),t=e.__e);do t=t&&t.nextSibling;while(t!=null&&t.nodeType==8);return t}function ue(e,t){return t=t||[],e==null||typeof e=="boolean"||(X(e)?e.some(function(n){ue(n,t)}):t.push(e)),t}function ht(e,t,n,s){var l,i,o,c=e.key,u=e.type,d=t[n],_=d!=null&&(2&d.__u)==0;if(d===null&&e.key==null||_&&c==d.key&&u==d.type)return n;if(s>(_?1:0)){for(l=n-1,i=n+1;l>=0||i<t.length;)if((d=t[o=l>=0?l--:i++])!=null&&!(2&d.__u)&&c==d.key&&u==d.type)return o}return-1}function ke(e,t,n){t[0]=="-"?e.setProperty(t,n??""):e[t]=n==null?"":typeof n!="number"||ut.test(t)?n:n+"px"}function ne(e,t,n,s,l){var i,o;e:if(t=="style")if(typeof n=="string")e.style.cssText=n;else{if(typeof s=="string"&&(e.style.cssText=s=""),s)for(t in s)n&&t in n||ke(e.style,t,"");if(n)for(t in n)s&&n[t]==s[t]||ke(e.style,t,n[t])}else if(t[0]=="o"&&t[1]=="n")i=t!=(t=t.replace(Oe,"$1")),o=t.toLowerCase(),t=o in e||t=="onFocusOut"||t=="onFocusIn"?o.slice(2):t.slice(2),e.l||(e.l={}),e.l[t+i]=n,n?s?n.u=s.u:(n.u=pe,e.addEventListener(t,i?ce:oe,i)):e.removeEventListener(t,i?ce:oe,i);else{if(l=="http://www.w3.org/2000/svg")t=t.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(t!="width"&&t!="height"&&t!="href"&&t!="list"&&t!="form"&&t!="tabIndex"&&t!="download"&&t!="rowSpan"&&t!="colSpan"&&t!="role"&&t!="popover"&&t in e)try{e[t]=n??"";break e}catch{}typeof n=="function"||(n==null||n===!1&&t[4]!="-"?e.removeAttribute(t):e.setAttribute(t,t=="popover"&&n==1?"":n))}}function $e(e){return function(t){if(this.l){var n=this.l[t.type+e];if(t.t==null)t.t=pe++;else if(t.t<n.u)return;return n(v.event?v.event(t):t)}}}function ge(e,t,n,s,l,i,o,c,u,d){var _,a,h,p,g,x,b,f,m,$,y,k,L,I,j,T,R,M=t.type;if(t.constructor!=null)return null;128&n.__u&&(u=!!(32&n.__u),i=[c=t.__e=n.__e]),(_=v.__b)&&_(t);e:if(typeof M=="function")try{if(f=t.props,m="prototype"in M&&M.prototype.render,$=(_=M.contextType)&&s[_.__c],y=_?$?$.props.value:_.__:s,n.__c?b=(a=t.__c=n.__c).__=a.__E:(m?t.__c=a=new M(f,y):(t.__c=a=new K(f,y),a.constructor=M,a.render=pt),$&&$.sub(a),a.props=f,a.state||(a.state={}),a.context=y,a.__n=s,h=a.__d=!0,a.__h=[],a._sb=[]),m&&a.__s==null&&(a.__s=a.state),m&&M.getDerivedStateFromProps!=null&&(a.__s==a.state&&(a.__s=H({},a.__s)),H(a.__s,M.getDerivedStateFromProps(f,a.__s))),p=a.props,g=a.state,a.__v=t,h)m&&M.getDerivedStateFromProps==null&&a.componentWillMount!=null&&a.componentWillMount(),m&&a.componentDidMount!=null&&a.__h.push(a.componentDidMount);else{if(m&&M.getDerivedStateFromProps==null&&f!==p&&a.componentWillReceiveProps!=null&&a.componentWillReceiveProps(f,y),!a.__e&&a.shouldComponentUpdate!=null&&a.shouldComponentUpdate(f,a.__s,y)===!1||t.__v==n.__v){for(t.__v!=n.__v&&(a.props=f,a.state=a.__s,a.__d=!1),t.__e=n.__e,t.__k=n.__k,t.__k.some(function(D){D&&(D.__=t)}),k=0;k<a._sb.length;k++)a.__h.push(a._sb[k]);a._sb=[],a.__h.length&&o.push(a);break e}a.componentWillUpdate!=null&&a.componentWillUpdate(f,a.__s,y),m&&a.componentDidUpdate!=null&&a.__h.push(function(){a.componentDidUpdate(p,g,x)})}if(a.context=y,a.props=f,a.__P=e,a.__e=!1,L=v.__r,I=0,m){for(a.state=a.__s,a.__d=!1,L&&L(t),_=a.render(a.props,a.state,a.context),j=0;j<a._sb.length;j++)a.__h.push(a._sb[j]);a._sb=[]}else do a.__d=!1,L&&L(t),_=a.render(a.props,a.state,a.context),a.state=a.__s;while(a.__d&&++I<25);a.state=a.__s,a.getChildContext!=null&&(s=H(H({},s),a.getChildContext())),m&&!h&&a.getSnapshotBeforeUpdate!=null&&(x=a.getSnapshotBeforeUpdate(p,g)),T=_,_!=null&&_.type===q&&_.key==null&&(T=Je(_.props.children)),c=ze(e,X(T)?T:[T],t,n,s,l,i,o,c,u,d),a.base=t.__e,t.__u&=-161,a.__h.length&&o.push(a),b&&(a.__E=a.__=null)}catch(D){if(t.__v=null,u||i!=null)if(D.then){for(t.__u|=u?160:128;c&&c.nodeType==8&&c.nextSibling;)c=c.nextSibling;i[i.indexOf(c)]=null,t.__e=c}else{for(R=i.length;R--;)me(i[R]);_e(t)}else t.__e=n.__e,t.__k=n.__k,D.then||_e(t);v.__e(D,t,n)}else i==null&&t.__v==n.__v?(t.__k=n.__k,t.__e=n.__e):c=t.__e=ft(n.__e,t,n,s,l,i,o,u,d);return(_=v.diffed)&&_(t),128&t.__u?void 0:c}function _e(e){e&&e.__c&&(e.__c.__e=!0),e&&e.__k&&e.__k.forEach(_e)}function Ge(e,t,n){for(var s=0;s<n.length;s++)be(n[s],n[++s],n[++s]);v.__c&&v.__c(t,e),e.some(function(l){try{e=l.__h,l.__h=[],e.some(function(i){i.call(l)})}catch(i){v.__e(i,l.__v)}})}function Je(e){return typeof e!="object"||e==null||e.__b&&e.__b>0?e:X(e)?e.map(Je):H({},e)}function ft(e,t,n,s,l,i,o,c,u){var d,_,a,h,p,g,x,b=n.props,f=t.props,m=t.type;if(m=="svg"?l="http://www.w3.org/2000/svg":m=="math"?l="http://www.w3.org/1998/Math/MathML":l||(l="http://www.w3.org/1999/xhtml"),i!=null){for(d=0;d<i.length;d++)if((p=i[d])&&"setAttribute"in p==!!m&&(m?p.localName==m:p.nodeType==3)){e=p,i[d]=null;break}}if(e==null){if(m==null)return document.createTextNode(f);e=document.createElementNS(l,m,f.is&&f),c&&(v.__m&&v.__m(t,i),c=!1),i=null}if(m==null)b===f||c&&e.data==f||(e.data=f);else{if(i=i&&Q.call(e.childNodes),b=n.props||G,!c&&i!=null)for(b={},d=0;d<e.attributes.length;d++)b[(p=e.attributes[d]).name]=p.value;for(d in b)if(p=b[d],d!="children"){if(d=="dangerouslySetInnerHTML")a=p;else if(!(d in f)){if(d=="value"&&"defaultValue"in f||d=="checked"&&"defaultChecked"in f)continue;ne(e,d,null,p,l)}}for(d in f)p=f[d],d=="children"?h=p:d=="dangerouslySetInnerHTML"?_=p:d=="value"?g=p:d=="checked"?x=p:c&&typeof p!="function"||b[d]===p||ne(e,d,p,b[d],l);if(_)c||a&&(_.__html==a.__html||_.__html==e.innerHTML)||(e.innerHTML=_.__html),t.__k=[];else if(a&&(e.innerHTML=""),ze(t.type=="template"?e.content:e,X(h)?h:[h],t,n,s,m=="foreignObject"?"http://www.w3.org/1999/xhtml":l,i,o,i?i[0]:n.__k&&B(n,0),c,u),i!=null)for(d=i.length;d--;)me(i[d]);c||(d="value",m=="progress"&&g==null?e.removeAttribute("value"):g!=null&&(g!==e[d]||m=="progress"&&!g||m=="option"&&g!=b[d])&&ne(e,d,g,b[d],l),d="checked",x!=null&&x!=e[d]&&ne(e,d,x,b[d],l))}return e}function be(e,t,n){try{if(typeof e=="function"){var s=typeof e.__u=="function";s&&e.__u(),s&&t==null||(e.__u=e(t))}else e.current=t}catch(l){v.__e(l,n)}}function Ye(e,t,n){var s,l;if(v.unmount&&v.unmount(e),(s=e.ref)&&(s.current&&s.current!=e.__e||be(s,null,t)),(s=e.__c)!=null){if(s.componentWillUnmount)try{s.componentWillUnmount()}catch(i){v.__e(i,t)}s.base=s.__P=null}if(s=e.__k)for(l=0;l<s.length;l++)s[l]&&Ye(s[l],t,n||typeof e.type!="function");n||me(e.__e),e.__c=e.__=e.__e=void 0}function pt(e,t,n){return this.constructor(e,n)}function mt(e,t,n){var s,l,i,o;t==document&&(t=document.documentElement),v.__&&v.__(e,t),l=(s=!1)?null:t.__k,i=[],o=[],ge(t,e=t.__k=Re(q,null,[e]),l||G,G,t.namespaceURI,l?null:t.firstChild?Q.call(t.childNodes):null,i,l?l.__e:t.firstChild,s,o),Ge(i,e,o)}function gt(e,t,n){var s,l,i,o,c=H({},e.props);for(i in e.type&&e.type.defaultProps&&(o=e.type.defaultProps),t)i=="key"?s=t[i]:i=="ref"?l=t[i]:c[i]=t[i]===void 0&&o!=null?o[i]:t[i];return arguments.length>2&&(c.children=arguments.length>3?Q.call(arguments,2):n),z(e.type,c,s||e.key,l||e.ref,null)}function bt(e){function t(n){var s,l;return this.getChildContext||(s=new Set,(l={})[t.__c]=this,this.getChildContext=function(){return l},this.componentWillUnmount=function(){s=null},this.shouldComponentUpdate=function(i){this.props.value!=i.value&&s.forEach(function(o){o.__e=!0,de(o)})},this.sub=function(i){s.add(i);var o=i.componentWillUnmount;i.componentWillUnmount=function(){s&&s.delete(i),o&&o.call(i)}}),n.children}return t.__c="__cC"+Be++,t.__=e,t.Provider=t.__l=(t.Consumer=function(n,s){return n.children(s)}).contextType=t,t}Q=qe.slice,v={__e:function(e,t,n,s){for(var l,i,o;t=t.__;)if((l=t.__c)&&!l.__)try{if((i=l.constructor)&&i.getDerivedStateFromError!=null&&(l.setState(i.getDerivedStateFromError(e)),o=l.__d),l.componentDidCatch!=null&&(l.componentDidCatch(e,s||{}),o=l.__d),o)return l.__E=l}catch(c){e=c}throw e}},We=0,K.prototype.setState=function(e,t){var n;n=this.__s!=null&&this.__s!=this.state?this.__s:this.__s=H({},this.state),typeof e=="function"&&(e=e(H({},n),this.props)),e&&H(n,e),e!=null&&this.__v&&(t&&this._sb.push(t),de(this))},K.prototype.forceUpdate=function(e){this.__v&&(this.__e=!0,e&&this.__h.push(e),de(this))},K.prototype.render=q,F=[],Ie=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,je=function(e,t){return e.__v.__b-t.__v.__b},ie.__r=0,Oe=/(PointerCapture)$|Capture$/i,pe=0,oe=$e(!1),ce=$e(!0),Be=0;var vt=0;function r(e,t,n,s,l,i){t||(t={});var o,c,u=t;if("ref"in u)for(c in u={},t)c=="ref"?o=t[c]:u[c]=t[c];var d={type:e,props:u,key:n,ref:o,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:--vt,__i:-1,__u:0,__source:l,__self:i};if(typeof e=="function"&&(o=e.defaultProps))for(c in o)u[c]===void 0&&(u[c]=o[c]);return v.vnode&&v.vnode(d),d}var J,w,ae,Se,Y=0,Qe=[],C=v,Pe=C.__b,Le=C.__r,Me=C.diffed,Ee=C.__c,He=C.unmount,Ne=C.__;function ve(e,t){C.__h&&C.__h(w,e,Y||t),Y=0;var n=w.__H||(w.__H={__:[],__h:[]});return e>=n.__.length&&n.__.push({}),n.__[e]}function S(e){return Y=1,yt(Ze,e)}function yt(e,t,n){var s=ve(J++,2);if(s.t=e,!s.__c&&(s.__=[Ze(void 0,t),function(c){var u=s.__N?s.__N[0]:s.__[0],d=s.t(u,c);u!==d&&(s.__N=[d,s.__[1]],s.__c.setState({}))}],s.__c=w,!w.__f)){var l=function(c,u,d){if(!s.__c.__H)return!0;var _=s.__c.__H.__.filter(function(h){return!!h.__c});if(_.every(function(h){return!h.__N}))return!i||i.call(this,c,u,d);var a=s.__c.props!==c;return _.forEach(function(h){if(h.__N){var p=h.__[0];h.__=h.__N,h.__N=void 0,p!==h.__[0]&&(a=!0)}}),i&&i.call(this,c,u,d)||a};w.__f=!0;var i=w.shouldComponentUpdate,o=w.componentWillUpdate;w.componentWillUpdate=function(c,u,d){if(this.__e){var _=i;i=void 0,l(c,u,d),i=_}o&&o.call(this,c,u,d)},w.shouldComponentUpdate=l}return s.__N||s.__}function P(e,t){var n=ve(J++,3);!C.__s&&Xe(n.__H,t)&&(n.__=e,n.u=t,w.__H.__h.push(n))}function Z(e){return Y=5,O(function(){return{current:e}},[])}function O(e,t){var n=ve(J++,7);return Xe(n.__H,t)&&(n.__=e(),n.__H=t,n.__h=e),n.__}function A(e,t){return Y=8,O(function(){return e},t)}function xt(){for(var e;e=Qe.shift();)if(e.__P&&e.__H)try{e.__H.__h.forEach(se),e.__H.__h.forEach(he),e.__H.__h=[]}catch(t){e.__H.__h=[],C.__e(t,e.__v)}}C.__b=function(e){w=null,Pe&&Pe(e)},C.__=function(e,t){e&&t.__k&&t.__k.__m&&(e.__m=t.__k.__m),Ne&&Ne(e,t)},C.__r=function(e){Le&&Le(e),J=0;var t=(w=e.__c).__H;t&&(ae===w?(t.__h=[],w.__h=[],t.__.forEach(function(n){n.__N&&(n.__=n.__N),n.u=n.__N=void 0})):(t.__h.forEach(se),t.__h.forEach(he),t.__h=[],J=0)),ae=w},C.diffed=function(e){Me&&Me(e);var t=e.__c;t&&t.__H&&(t.__H.__h.length&&(Qe.push(t)!==1&&Se===C.requestAnimationFrame||((Se=C.requestAnimationFrame)||wt)(xt)),t.__H.__.forEach(function(n){n.u&&(n.__H=n.u),n.u=void 0})),ae=w=null},C.__c=function(e,t){t.some(function(n){try{n.__h.forEach(se),n.__h=n.__h.filter(function(s){return!s.__||he(s)})}catch(s){t.some(function(l){l.__h&&(l.__h=[])}),t=[],C.__e(s,n.__v)}}),Ee&&Ee(e,t)},C.unmount=function(e){He&&He(e);var t,n=e.__c;n&&n.__H&&(n.__H.__.forEach(function(s){try{se(s)}catch(l){t=l}}),n.__H=void 0,t&&C.__e(t,n.__v))};var Ae=typeof requestAnimationFrame=="function";function wt(e){var t,n=function(){clearTimeout(s),Ae&&cancelAnimationFrame(t),setTimeout(e)},s=setTimeout(n,35);Ae&&(t=requestAnimationFrame(n))}function se(e){var t=w,n=e.__c;typeof n=="function"&&(e.__c=void 0,n()),w=t}function he(e){var t=w;e.__c=e.__(),w=t}function Xe(e,t){return!e||e.length!==t.length||t.some(function(n,s){return n!==e[s]})}function Ze(e,t){return typeof t=="function"?t(e):t}var Ct={};function re(e,t){for(var n in t)e[n]=t[n];return e}function kt(e,t,n){var s,l=/(?:\?([^#]*))?(#.*)?$/,i=e.match(l),o={};if(i&&i[1])for(var c=i[1].split("&"),u=0;u<c.length;u++){var d=c[u].split("=");o[decodeURIComponent(d[0])]=decodeURIComponent(d.slice(1).join("="))}e=fe(e.replace(l,"")),t=fe(t||"");for(var _=Math.max(e.length,t.length),a=0;a<_;a++)if(t[a]&&t[a].charAt(0)===":"){var h=t[a].replace(/(^:|[+*?]+$)/g,""),p=(t[a].match(/[+*?]+$/)||Ct)[0]||"",g=~p.indexOf("+"),x=~p.indexOf("*"),b=e[a]||"";if(!b&&!x&&(p.indexOf("?")<0||g)){s=!1;break}if(o[h]=decodeURIComponent(b),g||x){o[h]=e.slice(a).map(decodeURIComponent).join("/");break}}else if(t[a]!==e[a]){s=!1;break}return(n.default===!0||s!==!1)&&o}function $t(e,t){return e.rank<t.rank?1:e.rank>t.rank?-1:e.index-t.index}function St(e,t){return e.index=t,e.rank=function(n){return n.props.default?0:fe(n.props.path).map(Pt).join("")}(e),e.props}function fe(e){return e.replace(/(^\/+|\/+$)/g,"").split("/")}function Pt(e){return e.charAt(0)==":"?1+"*+?".indexOf(e.charAt(e.length-1))||4:5}var Lt={},W=[],De=[],E=null,et={url:ye()},Mt=bt(et);function ye(){var e;return""+((e=E&&E.location?E.location:E&&E.getCurrentLocation?E.getCurrentLocation():typeof location<"u"?location:Lt).pathname||"")+(e.search||"")}function tt(e,t){return t===void 0&&(t=!1),typeof e!="string"&&e.url&&(t=e.replace,e=e.url),function(n){for(var s=W.length;s--;)if(W[s].canRoute(n))return!0;return!1}(e)&&function(n,s){s===void 0&&(s="push"),E&&E[s]?E[s](n):typeof history<"u"&&history[s+"State"]&&history[s+"State"](null,null,n)}(e,t?"replace":"push"),nt(e)}function nt(e){for(var t=!1,n=0;n<W.length;n++)W[n].routeTo(e)&&(t=!0);return t}function Et(e){if(e&&e.getAttribute){var t=e.getAttribute("href"),n=e.getAttribute("target");if(t&&t.match(/^\//g)&&(!n||n.match(/^_?self$/i)))return tt(t)}}function Ht(e){return e.stopImmediatePropagation&&e.stopImmediatePropagation(),e.stopPropagation&&e.stopPropagation(),e.preventDefault(),!1}function Nt(e){if(!(e.ctrlKey||e.metaKey||e.altKey||e.shiftKey||e.button)){var t=e.target;do if(t.localName==="a"&&t.getAttribute("href")){if(t.hasAttribute("data-native")||t.hasAttribute("native"))return;if(Et(t))return Ht(e)}while(t=t.parentNode)}}var Ue=!1;function rt(e){e.history&&(E=e.history),this.state={url:e.url||ye()}}re(rt.prototype=new K,{shouldComponentUpdate:function(e){return e.static!==!0||e.url!==this.props.url||e.onChange!==this.props.onChange},canRoute:function(e){var t=ue(this.props.children);return this.g(t,e)!==void 0},routeTo:function(e){this.setState({url:e});var t=this.canRoute(e);return this.p||this.forceUpdate(),t},componentWillMount:function(){this.p=!0},componentDidMount:function(){var e=this;Ue||(Ue=!0,E||addEventListener("popstate",function(){nt(ye())}),addEventListener("click",Nt)),W.push(this),E&&(this.u=E.listen(function(t){var n=t.location||t;e.routeTo(""+(n.pathname||"")+(n.search||""))})),this.p=!1},componentWillUnmount:function(){typeof this.u=="function"&&this.u(),W.splice(W.indexOf(this),1)},componentWillUpdate:function(){this.p=!0},componentDidUpdate:function(){this.p=!1},g:function(e,t){e=e.filter(St).sort($t);for(var n=0;n<e.length;n++){var s=e[n],l=kt(t,s.props.path,s.props);if(l)return[s,l]}},render:function(e,t){var n,s,l=e.onChange,i=t.url,o=this.c,c=this.g(ue(e.children),i);if(c&&(s=gt(c[0],re(re({url:i,matches:n=c[1]},n),{key:void 0,ref:void 0}))),i!==(o&&o.url)){re(et,o=this.c={url:i,previous:o&&o.url,current:s,path:s?s.props.path:null,matches:n}),o.router=this,o.active=s?[s]:[];for(var u=De.length;u--;)De[u]({});typeof l=="function"&&l(o)}return Re(Mt.Provider,{value:o},s)}});const At=({meta:e,onNavigate:t})=>e.showHeader?r("section",{class:"page-header",children:[r("nav",{class:"breadcrumb","aria-label":"Breadcrumb",children:r("ol",{children:e.breadcrumbs.map((n,s)=>s===e.breadcrumbs.length-1||!n.path?r("li",{"aria-current":"page",children:r("span",{children:n.label})},`${n.label}-${s}`):r("li",{children:[r("button",{type:"button",class:"breadcrumb-link",onClick:()=>t(n.path),children:n.label}),r("span",{class:"breadcrumb-separator","aria-hidden":"true",children:"/"})]},`${n.label}-${s}`))})}),r("div",{class:"page-header-content",children:r("div",{children:[r("h2",{class:"text-lg font-semibold text-slate-900",children:e.title}),r("p",{class:"muted text-sm",children:e.description})]})})]}):null,Dt={ap:"Setup Mode (AP Mode)",sta:"WiFi Mode (STA Mode)",apsta:"Dual Mode (AP+STA)",unknown:"Unknown"},Ut={ap:"bg-amber-100 text-amber-800 border-amber-300",sta:"bg-green-100 text-green-800 border-green-300",apsta:"bg-blue-100 text-blue-800 border-blue-300",unknown:"bg-slate-100 text-slate-600 border-slate-300"};function Tt({type:e}){const t=Dt[e],n=Ut[e];return r("div",{class:`inline-flex items-center rounded-full border px-3 py-1 text-xs font-medium ${n}`,title:t,children:t})}const st=e=>typeof e=="object"&&e!==null,it=e=>st(e)&&typeof e.message=="string",Ft=(e,t)=>{const{error:n}=e;return typeof n=="string"&&n.length>0?n:it(n)?n.message:typeof e.message=="string"&&e.message.length>0?e.message:t},Wt=(e,t)=>{if(!e)return t;if(!t)return e;const n=new Headers(e);return new Headers(t).forEach((s,l)=>{n.set(l,s)}),n};function It(e,t){if(e===t)return!0;if(!e||!t)return!1;try{return JSON.stringify(e)===JSON.stringify(t)}catch{return!1}}function U(e,t){const[n,s]=S(null),[l,i]=S(null),[o,c]=S(!1),u=Z(null),d=A(async a=>{var b;(b=u.current)==null||b.abort();const h=new AbortController;u.current=h;const p=(a==null?void 0:a.url)??e,g=Wt(t==null?void 0:t.headers,a==null?void 0:a.headers),x={...t,...a,headers:g,signal:h.signal};c(!0),i(null);try{const f=await fetch(p,x);if(!f.ok){let y=`request failed: ${f.status}`;try{const k=await f.json();st(k)&&(y=Ft(k,y))}catch(k){k instanceof Error&&console.debug("Failed to parse error response",k)}throw new Error(y)}const m=await f.json();if(!m||typeof m.status!="string")throw new Error("Unexpected API response format");if(m.status!=="success"){const y=m.error,k=typeof y=="string"?y:it(y)?y.message:"Request failed";throw new Error(k)}const $=m.data;return s(y=>It(y,$)?y:$),$}catch(f){return f.name==="AbortError"||(console.error(f),i(f instanceof Error?f.message:"Request failed"),s(null)),null}finally{c(!1)}},[t,e]);P(()=>()=>{var a;return(a=u.current)==null?void 0:a.abort()},[]);const _=A(()=>{var a;(a=u.current)==null||a.abort(),s(null),i(null),c(!1)},[]);return{data:n,error:l,loading:o,execute:d,reset:_}}function jt(){const{data:e,error:t,loading:n,execute:s}=U("/health");return P(()=>{s()},[s]),{health:e,error:t,loading:n}}const Te=({onNavigate:e})=>r("section",{class:"grid gap-6 md:grid-cols-2",children:[r("div",{class:"card space-y-4",children:[r("div",{children:[r("h2",{class:"section-title",children:"Device Information"}),r("p",{class:"muted text-sm",children:"View device model and firmware details"})]}),r("button",{type:"button",class:"btn-primary w-full justify-center",onClick:()=>e("/device/info"),children:"View device info"})]}),r("div",{class:"card space-y-4",children:[r("div",{children:[r("h2",{class:"section-title",children:"System Metrics"}),r("p",{class:"muted text-sm",children:"Monitor memory and system health"})]}),r("button",{type:"button",class:"btn-primary w-full justify-center",onClick:()=>e("/device/metrics"),children:"View metrics"})]}),r("div",{class:"card space-y-4",children:[r("div",{children:[r("h2",{class:"section-title",children:"Device Logs"}),r("p",{class:"muted text-sm",children:"View real-time device logs"})]}),r("button",{type:"button",class:"btn-primary w-full justify-center",onClick:()=>e("/device/logs"),children:"View logs"})]}),r("div",{class:"card space-y-4",children:[r("div",{children:[r("h2",{class:"section-title",children:"mDNS Configuration"}),r("p",{class:"muted text-sm",children:"Check mDNS settings and status"})]}),r("button",{type:"button",class:"btn-primary w-full justify-center",onClick:()=>e("/device/mdns"),children:"View mDNS"})]}),r("div",{class:"card space-y-4",children:[r("div",{children:[r("h2",{class:"section-title",children:"Wi-Fi Configuration"}),r("p",{class:"muted text-sm",children:"Update Wi-Fi credentials"})]}),r("button",{type:"button",class:"btn-primary w-full justify-center",onClick:()=>e("/wifi"),children:"Configure Wi-Fi"})]})]}),Ot=()=>{const{data:e,loading:t,error:n,execute:s}=U("/api/v1/device");return P(()=>{s()},[s]),r("div",{class:"card",children:[r("h2",{class:"section-title",children:"Device Overview"}),t&&r("p",{class:"muted",children:"Loading..."}),n&&r("p",{class:"error-text",children:n}),e&&r("dl",{class:"grid gap-3 text-sm text-slate-700",children:[r("div",{class:"info-row",children:[r("dt",{children:"Model"}),r("dd",{children:e.model})]}),r("div",{class:"info-row",children:[r("dt",{children:"Firmware"}),r("dd",{children:e.firmware_version})]}),r("div",{class:"info-row",children:[r("dt",{children:"Build Time"}),r("dd",{children:e.build_time})]}),r("div",{class:"info-row",children:[r("dt",{children:"ESP-IDF"}),r("dd",{children:e.idf_version})]})]})]})},Bt=()=>r("section",{class:"space-y-6",children:r(Ot,{})});function lt(e,t={}){const{intervalMs:n=3e3,enabled:s=!0,immediate:l=!0}=t,i=Z(()=>{});P(()=>{i.current=e},[e]);const o=A(async()=>{await i.current()},[]);return P(()=>{if(!s||typeof window>"u")return()=>{};let c=!0,u;const d=async()=>{if(c)try{await i.current()}finally{c&&(u=window.setTimeout(d,n))}};return l?d():u=window.setTimeout(d,n),()=>{c=!1,u!==void 0&&window.clearTimeout(u)}},[s,l,n]),{refresh:o}}const V=e=>!Number.isFinite(e)||e<0?"-":e<1024?`${e} B`:e<1024*1024?`${(e/1024).toFixed(1)} KiB`:`${(e/(1024*1024)).toFixed(2)} MiB`,qt=()=>{const{data:e,loading:t,error:n,execute:s}=U("/api/v1/metrics"),{refresh:l}=lt(()=>s(),{intervalMs:5e3,immediate:!1});P(()=>{s()},[s]);const i=O(()=>e&&e.heap_total>0?Math.round(e.heap_used/e.heap_total*100):0,[e]);return r("div",{class:"card space-y-4",children:[r("div",{class:"flex items-center justify-between gap-4",children:[r("h2",{class:"section-title",children:"System Metrics"}),r("button",{type:"button",class:"btn-secondary",onClick:()=>{l()},disabled:t,children:"Refresh"})]}),t&&!e&&r("p",{class:"muted",children:"Loading..."}),n&&r("p",{class:"error-text",children:n}),e&&r("div",{class:"space-y-5 text-sm text-slate-700",children:r("div",{children:[r("h3",{class:"text-xs font-semibold uppercase tracking-wide text-slate-500",children:"Heap"}),r("dl",{class:"mt-2 grid gap-3",children:[r("div",{class:"info-row",children:[r("dt",{children:"Total Heap"}),r("dd",{children:V(e.heap_total)})]}),r("div",{class:"info-row",children:[r("dt",{children:"Heap Used"}),r("dd",{children:[V(e.heap_used)," ",r("span",{class:"muted text-xs",children:["(",i,"%)"]})]})]}),r("div",{class:"info-row",children:[r("dt",{children:"Heap Free"}),r("dd",{children:V(e.heap_free)})]}),r("div",{class:"info-row",children:[r("dt",{children:"Minimum Free (Watermark)"}),r("dd",{children:V(e.heap_min_free)})]}),r("div",{class:"info-row",children:[r("dt",{children:"Largest Free Block"}),r("dd",{children:V(e.heap_largest_free_block)})]})]})]})})]})},Rt=()=>r("section",{class:"space-y-6",children:r(qt,{})}),Vt=()=>{const{data:e,loading:t,error:n,execute:s}=U("/api/v1/logs?limit=1000"),{refresh:l}=lt(()=>s(),{intervalMs:5e3,immediate:!1});P(()=>{s()},[s]);const i=(e==null?void 0:e.entries)??[],o=i.length>0;return r("div",{class:"card space-y-4",children:[r("div",{class:"flex items-center justify-between gap-4",children:[r("h2",{class:"section-title",children:"Device Logs"}),r("div",{class:"flex items-center gap-3",children:[t&&o&&r("span",{class:"text-xs text-slate-500",children:"Updating..."}),r("button",{type:"button",class:"btn-secondary",onClick:()=>{l()},disabled:t,children:"Refresh"})]})]}),t&&!o&&r("div",{class:"flex items-center gap-2 text-slate-500",children:r("svg",{class:"h-4 w-4 animate-spin",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round","aria-label":"Loading logs",children:[r("path",{d:"M21 12a9 9 0 1 1-6.219-8.56"}),r("path",{d:"M21 12a9 9 0 0 0-9-9"})]})}),n&&r("p",{class:"error-text",children:n}),o?r("div",{class:"overflow-hidden rounded border border-slate-200",children:[r("div",{class:"max-h-96 overflow-x-auto overflow-y-auto",children:r("table",{class:"w-full min-w-[560px] table-auto text-left text-sm text-slate-700",children:[r("thead",{children:r("tr",{class:"text-xs uppercase tracking-wide text-slate-500",children:[r("th",{class:"px-3 py-2",children:"Time (ms)"}),r("th",{class:"px-3 py-2",children:"Level"}),r("th",{class:"px-3 py-2",children:"Tag"}),r("th",{class:"px-3 py-2",children:"Message"})]})}),r("tbody",{class:"divide-y divide-slate-200",children:i.map(u=>r("tr",{class:"align-top",children:[r("td",{class:"px-3 py-2 font-mono text-xs text-slate-500",children:u.timestamp_ms}),r("td",{class:"px-3 py-2",children:r("span",{class:`status-pill ${u.level==="error"?"bg-rose-100 text-rose-700":u.level==="warn"?"bg-amber-100 text-amber-700":u.level==="info"?"bg-sky-100 text-sky-700":(u.level==="debug","bg-slate-200 text-slate-600")}`,children:u.level.toUpperCase()})}),r("td",{class:"px-3 py-2 font-mono text-xs text-slate-500",children:u.tag||"-"}),r("td",{class:"px-3 py-2 whitespace-pre-wrap break-words",children:u.message})]},u.id))})]})}),(e==null?void 0:e.has_more)&&r("p",{class:"border-t border-slate-200 px-3 py-2 text-xs text-slate-500",children:["Showing latest ",i.length," entries. More logs are available on the device."]})]}):!t&&r("div",{class:"rounded border border-dashed border-slate-300 bg-slate-50 px-4 py-8 text-center text-sm text-slate-500",children:"Logs will appear here once the device emits output."})]})},zt=()=>r("section",{class:"space-y-6",children:r(Vt,{})}),Kt=()=>{const{data:e,loading:t,error:n,execute:s}=U("/api/v1/mdns");return P(()=>{s()},[s]),r("div",{class:"card",children:[r("h2",{class:"section-title",children:"mDNS"}),t&&r("p",{class:"muted",children:"Loading..."}),n&&r("p",{class:"error-text",children:n}),e&&r("dl",{class:"grid gap-3 text-sm text-slate-700",children:[r("div",{class:"info-row",children:[r("dt",{children:"Status"}),r("dd",{children:r("span",{class:`status-pill ${e.running?"bg-emerald-100 text-emerald-700":"bg-slate-200 text-slate-600"}`,children:e.running?"Active":"Stopped"})})]}),r("div",{class:"info-row",children:[r("dt",{children:"Hostname"}),r("dd",{children:e.hostname})]}),r("div",{class:"info-row",children:[r("dt",{children:"Instance"}),r("dd",{children:e.instance_name})]}),r("div",{class:"info-row",children:[r("dt",{children:"Service"}),r("dd",{children:e.service_type})]}),r("div",{class:"info-row",children:[r("dt",{children:"Protocol"}),r("dd",{children:e.protocol})]}),r("div",{class:"info-row",children:[r("dt",{children:"Port"}),r("dd",{children:e.port})]}),r("div",{class:"info-row",children:[r("dt",{children:"Access URL"}),r("dd",{children:r("a",{href:`http://${e.hostname}.local/`,target:"_blank",rel:"noopener noreferrer",class:"text-sky-600 underline decoration-sky-400 decoration-2 underline-offset-4 hover:text-sky-700",children:`http://${e.hostname}.local/`})})]})]})]})},Gt=()=>r("section",{class:"space-y-6",children:r(Kt,{})}),Jt=({message:e,type:t,onClose:n,durationMs:s=3e3})=>(P(()=>{if(!e)return;const o=window.setTimeout(()=>{n()},s);return()=>window.clearTimeout(o)},[e,s,n]),r("div",{class:`flex items-center gap-3 rounded-full border px-4 py-2 shadow-lg backdrop-blur-md ${t==="success"?"bg-emerald-50/90 border-emerald-200 text-emerald-900":"bg-rose-50/90 border-rose-200 text-rose-900"}`,role:"alert",children:[r("span",{class:"text-sm font-medium",children:e}),r("button",{type:"button",class:"rounded-full px-2 text-lg font-bold text-inherit transition hover:bg-white/40",onClick:n,"aria-label":"Dismiss",children:"×"})]})),Yt=()=>r("span",{class:"inline-block h-4 w-4 animate-spin rounded-full border-2 border-slate-300 border-t-sky-500","aria-hidden":"true"}),Qt=()=>{const{data:e,loading:t,execute:n}=U("/api/v1/wifi/status",{method:"GET"});P(()=>{n()},[]);const s=O(()=>e?e.sta_connected?e.ip?`Connected to ${e.ip}`:"Connected":e.sta_error&&e.sta_error.length>0?`Connection error: ${e.sta_error}`:e.sta_connecting?"Connecting to network...":"Not connected":t?"Checking Wi-Fi status...":"Status unavailable",[e,t]),l=O(()=>e?e.ap_active?{label:"Active",description:"Device is broadcasting the setup access point.",badgeClass:"status-pill bg-emerald-100 text-emerald-700"}:{label:"Inactive",description:"Soft AP is currently disabled.",badgeClass:"status-pill bg-slate-200 text-slate-600"}:{label:"Unknown",description:"Waiting for status update.",badgeClass:"status-pill bg-slate-200 text-slate-600"},[e]),i=O(()=>e?e.sta_connected?{label:"Connected",description:e.ip?`Client connected with IP ${e.ip}.`:"Client connected to Wi-Fi network.",badgeClass:"status-pill bg-emerald-100 text-emerald-700"}:e.sta_error&&e.sta_error.length>0?{label:"Error",description:`Last error: ${e.sta_error}.`,badgeClass:"status-pill bg-rose-100 text-rose-700"}:e.sta_connecting?{label:"Connecting",description:"Attempting to join the configured network...",badgeClass:"status-pill bg-amber-100 text-amber-700"}:{label:"Not connected",description:"STA client is idle.",badgeClass:"status-pill bg-slate-200 text-slate-600"}:{label:t?"Checking":"Unknown",description:t?"Fetching the latest station status...":"Waiting for status update.",badgeClass:t?"status-pill bg-sky-100 text-sky-600":"status-pill bg-slate-200 text-slate-600"},[e,t]);return r("div",{class:"card",children:[r("div",{class:"flex items-center justify-between gap-3",children:[r("h2",{class:"section-title !mb-0",children:"Wi-Fi Status"}),t&&r(Yt,{})]}),r("p",{class:"text-sm text-slate-600",children:s}),r("div",{class:"mt-4 grid gap-4 md:grid-cols-2",children:[r("div",{class:"rounded-xl border border-slate-200 bg-slate-50 p-4",children:[r("div",{class:"flex items-center justify-between",children:[r("h3",{class:"text-sm font-semibold text-slate-800",children:"Access Point"}),r("span",{class:l.badgeClass,children:l.label})]}),r("p",{class:"mt-2 text-sm text-slate-600",children:l.description}),e&&r("dl",{class:"mt-3 space-y-2 text-sm text-slate-700",children:r("div",{class:"info-row",children:[r("dt",{children:"Broadcasting"}),r("dd",{children:e.ap_active?"Yes":"No"})]})})]}),r("div",{class:"rounded-xl border border-slate-200 bg-slate-50 p-4",children:[r("div",{class:"flex items-center justify-between",children:[r("h3",{class:"text-sm font-semibold text-slate-800",children:"Station"}),r("span",{class:i.badgeClass,children:i.label})]}),r("p",{class:"mt-2 text-sm text-slate-600",children:i.description}),e&&r("dl",{class:"mt-3 space-y-2 text-sm text-slate-700",children:[r("div",{class:"info-row",children:[r("dt",{children:"Enabled"}),r("dd",{children:e.sta_active?"Yes":"No"})]}),r("div",{class:"info-row",children:[r("dt",{children:"IP Address"}),r("dd",{children:e.ip||"-"})]}),r("div",{class:"info-row",children:[r("dt",{children:"Disconnect Reason"}),r("dd",{children:e.disconnect_reason})]}),r("div",{class:"info-row",children:[r("dt",{children:"Last Error"}),r("dd",{children:e.sta_error||"None"})]})]})]})]}),r("div",{class:"mt-4 flex justify-end",children:r("button",{type:"button",class:"btn-secondary",onClick:()=>n(),children:"Refresh"})})]})},Xt=e=>e>=80?4:e>=60?3:e>=40?2:e>=20?1:0,at=({strength:e,label:t})=>{const n=Xt(e),s=[0,1,2,3],l=[8,12,16,20];return r("span",{class:"flex items-end gap-1","aria-label":t??`Signal strength ${n} of 4`,children:s.map(i=>r("span",{class:`w-1.5 rounded-full transition ${i<n?"bg-slate-900":"bg-slate-300"}`,style:{height:`${l[i]}px`}},i))})},Zt=({security:e})=>r("span",{class:"rounded-full border border-slate-200 px-2 py-0.5 text-xs font-medium text-slate-500",children:e==="Open"?"No security":e}),en=({network:e,open:t,password:n,showPassword:s,loading:l,awaitingResult:i,notice:o,validationError:c,onClose:u,onConnect:d,onPasswordChange:_,onToggleShowPassword:a})=>{if(!t||!e)return null;const h=e.security.trim().toLowerCase()!=="open";return r("div",{class:"fixed inset-0 z-50 flex flex-col justify-end bg-slate-900/40 px-4 pb-4",children:[r("button",{type:"button",class:"flex-1","aria-label":"Close modal",onClick:()=>{i||u()},disabled:i}),r("div",{class:"w-full rounded-3xl border border-slate-200 bg-white p-6 shadow-2xl",children:[r("div",{class:"mx-auto mb-4 h-1.5 w-12 rounded-full bg-slate-200"}),r("div",{class:"flex items-start justify-between gap-4",children:[r("div",{children:[r("span",{class:"text-xs font-medium text-slate-500",children:h?e.security:"No password required"}),r("h3",{class:"mt-1 text-lg font-semibold text-slate-900",children:e.ssid})]}),r(at,{strength:e.signal})]}),h&&r("div",{class:"mt-5",children:r("label",{class:"form-field",children:[r("span",{children:"Password"}),r("div",{class:"relative",children:[r("input",{type:s?"text":"password",value:n,onInput:p=>_(p.currentTarget.value),placeholder:"8-63 characters or 64-digit hex",minLength:8,maxLength:64,required:!0,class:"input pr-20",disabled:i}),r("button",{type:"button",class:"absolute inset-y-0 right-0 flex items-center px-3 text-sm font-medium text-sky-600",onClick:a,disabled:i,children:s?"Hide":"Show"})]})]})}),c&&r("p",{class:"mt-4 text-sm font-medium text-rose-600",role:"alert",children:c}),r("div",{class:"mt-6 flex items-center justify-between",children:[r("span",{class:"text-sm text-slate-500",children:i?"Connecting to the selected network...":"Will connect once credentials are saved."}),r("button",{type:"button",class:`btn-secondary${i?" opacity-60":""}`,onClick:()=>{i||u()},disabled:i,children:i?"Please wait...":"Cancel"})]}),r("button",{type:"button",class:"btn-primary mt-6 w-full disabled:bg-sky-300 disabled:cursor-not-allowed disabled:opacity-80",onClick:d,disabled:l||i,children:l?"Saving...":i?"Connecting...":"Connect"}),o&&r("div",{class:`mt-6 rounded-2xl border p-4 text-sm ${o.type==="error"?"border-rose-200 bg-rose-50 text-rose-700":"border-sky-200 bg-sky-50 text-sky-700"}`,role:o.type==="error"?"alert":"status","aria-live":"polite",children:o.message})]})]})},tn=e=>/^[0-9a-fA-F]+$/.test(e),nn=({network:e,onConnectionStatusChange:t,onPasswordSaved:n})=>{const[s,l]=S(!1),[i,o]=S(e.lastPassphrase||""),[c,u]=S(!1),[d,_]=S(null),[a,h]=S(!1),[p,g]=S(!1),[x,b]=S(!1),[f,m]=S(null),{execute:$,loading:y,error:k,reset:L}=U("/api/v1/wifi/credentials",{method:"POST",headers:{"Content-Type":"application/json"}}),I=Z(null);P(()=>{k&&k!==I.current&&(m({type:"error",message:k}),b(!1),h(!1),g(!0),I.current=k),k||(I.current=null)},[k]);const j=A(()=>{l(!0),u(!1),_(null),g(!1),m(null),b(!1),o(e.lastPassphrase||"")},[e.lastPassphrase]),T=A(()=>{l(!1),o(""),_(null),u(!1),m(null),b(!1),h(!1),L()},[L]),R=A(async()=>{const N=i.trim(),ee=e.security.trim().toLowerCase()!=="open",ot=N.length>=8&&N.length<=63,ct=N.length===64&&tn(N);if(ee&&!N){_("Please enter the password."),L();return}if(ee&&!ot&&!ct){_("Enter 8-63 characters or a 64-digit hex string."),L();return}_(null),g(!1),h(!0),b(!0),m({type:"info",message:`Attempting to connect to ${e.ssid}...`});try{const te=await $({body:JSON.stringify({ssid:e.ssid.trim(),passphrase:ee?N:""})});if(te){const{restart_required:xe,sta_connect_started:dt,sta_error:we}=te;if(n&&ee&&n(e.id,N),we){m({type:"error",message:`Failed to connect (${we}). Please review the credentials and try again.`}),b(!1),h(!1),g(!0);return}const le=!!dt;m(le?{type:"info",message:`Connecting to ${e.ssid}...`}:typeof xe=="boolean"&&xe?{type:"info",message:"Credentials saved. Device restart is required to finish applying the changes."}:{type:"info",message:"Credentials saved. Waiting for status update..."}),b(le),le||h(!1)}else b(!1),h(!1),m({type:"error",message:"Failed to submit credentials. Please try again."})}catch(te){console.error(te),h(!1),b(!1),m({type:"error",message:"An unexpected error occurred while saving credentials. Please try again."})}},[e,i,$,n,L]);P(()=>{e.connected&&a&&(h(!1),b(!1),g(!1),m(null),s&&(l(!1),o(""),_(null),u(!1),L()),t&&t(e.id,!0))},[e.connected,a,s,L,e.id,t]);const M=a?"Connecting...":p?"Not connected":e.connected?"Connected":void 0,D=s||e.connected?"border-sky-200 bg-sky-50":"border-transparent bg-white hover:bg-slate-50";return r(q,{children:[r("button",{type:"button",class:`flex w-full items-center justify-between rounded-2xl border px-4 py-3 text-left transition focus:outline-none focus:ring-2 focus:ring-sky-200 ${D} ${a?"ring-2 ring-amber-300":""}`,onClick:j,children:[r("div",{class:"flex flex-col gap-1",children:[r("span",{class:"text-sm font-semibold text-slate-900",children:e.ssid}),r("div",{class:"flex items-center gap-2 text-xs text-slate-500",children:[r(Zt,{security:e.security}),M&&r("span",{class:`flex items-center gap-1 ${a?"text-amber-600":p?"text-rose-600":"text-sky-600"}`,children:[a&&r("span",{class:"inline-block h-3.5 w-3.5 animate-spin rounded-full border border-current border-t-transparent","aria-hidden":"true"}),M]})]})]}),r(at,{strength:e.signal,label:`Signal strength for ${e.ssid}: ${e.rssi} dBm`})]}),r(en,{network:e,open:s,password:i,showPassword:c,loading:y,awaitingResult:x,notice:f,validationError:d,onClose:T,onConnect:R,onPasswordChange:o,onToggleShowPassword:()=>u(N=>!N)})]})},rn=e=>{const t=e.findIndex(s=>s.connected);return t<=0?e:[e[t],...e.slice(0,t),...e.slice(t+1)]},sn=({label:e})=>r("div",{class:"mt-4 flex items-center gap-2 text-sm text-slate-500",role:"status","aria-live":"polite",children:[r("span",{class:"inline-block h-4 w-4 animate-spin rounded-full border-2 border-slate-300 border-t-sky-500"}),r("span",{children:e??"Loading..."})]}),ln=({onError:e})=>{const[t,n]=S([]),[s,l]=S(!1),[i,o]=S(!1),{data:c,error:u,execute:d}=U("/api/v1/wifi/scan",{method:"GET"}),_=Z(null),a=A(async()=>{l(!0);try{await d({url:"/api/v1/wifi/scan"})}catch(g){console.error(g)}finally{l(!1)}},[d]);P(()=>{u&&u!==_.current&&(e&&e(u),_.current=u),u||(_.current=null)},[u,e]),P(()=>{c&&(o(!0),!(c.error&&c.error.length>0)&&n(g=>{const x=new Map(g.map(f=>[f.id,f])),b=c.networks.filter(f=>f.ssid.trim().length>0).map(f=>{const m=f.bssid.trim().toLowerCase(),$=m.length>0?m:`${f.ssid}-${f.channel}`,y=x.get($);return{id:$,ssid:f.ssid,signal:Math.max(0,Math.min(100,Math.round(f.signal))),security:f.security,connected:f.connected,hidden:f.hidden,bssid:f.bssid,rssi:f.rssi,lastPassphrase:(y==null?void 0:y.lastPassphrase)??""}});return rn(b)}))},[c]);const h=()=>{s||a()},p=A((g,x)=>{n(b=>b.map(f=>f.id===g?{...f,lastPassphrase:x}:f))},[]);return r("div",{class:"card",children:[r("div",{class:"flex items-center justify-between",children:[r("div",{children:[r("h2",{class:"section-title !mb-1",children:"Available Networks"}),r("p",{class:"text-sm text-slate-500",children:"Choose a nearby Wi-Fi network and enter the password if required."})]}),r("button",{type:"button",class:"btn-secondary",onClick:h,disabled:s,children:s?"Scanning...":i?"Rescan":"Scan"})]}),s&&r(sn,{label:"Scanning for networks..."}),r("div",{class:"mt-5 grid gap-2",children:t.map(g=>r(nn,{network:g,onPasswordSaved:p},g.id))}),t.length===0&&r("div",{class:"mt-6 rounded-2xl border border-dashed border-slate-300 bg-slate-50 p-6 text-center text-sm text-slate-500",children:s?"Scanning nearby networks...":i?"No networks found. Try scanning again.":"Press Scan to search for nearby networks."})]})},an=()=>{const[e,t]=S(null),n=A(s=>{t({type:"error",message:s})},[]);return r(q,{children:[e&&r("div",{class:"fixed inset-x-0 top-4 z-40 flex justify-center px-4",role:"status","aria-live":"polite",children:r(Jt,{message:e.message,type:e.type,onClose:()=>t(null)})}),r("section",{class:"space-y-6",children:[r(Qt,{}),r(ln,{onError:n})]})]})},on=[{path:"/",label:"Home"},{path:"/device/info",label:"Device Info"},{path:"/device/metrics",label:"Metrics"},{path:"/device/logs",label:"Logs"},{path:"/device/mdns",label:"mDNS"},{path:"/wifi",label:"Wi-Fi"}],Fe=e=>{if(!e)return"/";const[t]=e.split("?");return t.length>1&&t.endsWith("/")?t.slice(0,-1):t||"/"},cn={"/device/info":{showHeader:!0,title:"Device Information",description:"View device model and firmware details",breadcrumbs:[{label:"Home",path:"/"},{label:"Device Info"}]},"/device/metrics":{showHeader:!0,title:"System Metrics",description:"Monitor memory and system health",breadcrumbs:[{label:"Home",path:"/"},{label:"Metrics"}]},"/device/logs":{showHeader:!0,title:"Device Logs",description:"View real-time device logs",breadcrumbs:[{label:"Home",path:"/"},{label:"Logs"}]},"/device/mdns":{showHeader:!0,title:"mDNS Configuration",description:"Check mDNS settings and status",breadcrumbs:[{label:"Home",path:"/"},{label:"mDNS"}]},"/wifi":{showHeader:!0,title:"Wi-Fi",description:"Update Wi-Fi credentials",breadcrumbs:[{label:"Home",path:"/"},{label:"Wi-Fi"}]}},dn={showHeader:!1,title:"",description:"",breadcrumbs:[]};function un(){const[e,t]=S(()=>typeof window<"u"?window.location.pathname:"/"),[n,s]=S(!1),l=Z(null),{health:i}=jt();P(()=>{const _=h=>{l.current&&h.target instanceof Node&&!l.current.contains(h.target)&&s(!1)},a=h=>{h.key==="Escape"&&s(!1)};return document.addEventListener("click",_),document.addEventListener("keydown",a),()=>{document.removeEventListener("click",_),document.removeEventListener("keydown",a)}},[]);const o=_=>{t(Fe(_.url??"/")),s(!1)},c=_=>{tt(_),s(!1)},u=Fe(e),d=cn[u]??dn;return r("div",{class:"min-h-screen bg-slate-100 text-slate-900",children:[r("header",{class:"bg-white/95 shadow-sm",children:r("div",{class:"mx-auto flex w-full max-w-4xl items-center justify-between gap-4 px-4 py-4",children:[r("h1",{class:"text-xl font-semibold text-slate-900",children:"ESP Gateway"}),r("div",{class:"flex items-center gap-3",children:[i&&r(Tt,{type:i.connection_type}),r("nav",{class:"relative",ref:l,children:[r("button",{type:"button",class:"menu-toggle","aria-haspopup":"true","aria-expanded":n,"aria-label":"Open navigation",onClick:_=>{_.stopPropagation(),s(a=>!a)},children:r("span",{class:"menu-icon","aria-hidden":"true",children:[r("span",{}),r("span",{}),r("span",{})]})}),n&&r("div",{class:"menu-sheet",role:"menu",children:on.map(_=>r("button",{type:"button",role:"menuitem",class:`menu-item${u===_.path?" menu-item-active":""}`,onClick:a=>{a.stopPropagation(),c(_.path)},children:_.label},_.path))})]})]})]})}),r("main",{class:"mx-auto w-full max-w-4xl space-y-6 px-4 py-8",children:[r(At,{meta:d,onNavigate:c}),r(rt,{onChange:o,children:[r(Te,{path:"/",onNavigate:c}),r(Bt,{path:"/device/info"}),r(Rt,{path:"/device/metrics"}),r(zt,{path:"/device/logs"}),r(Gt,{path:"/device/mdns"}),r(an,{path:"/wifi"}),r(Te,{default:!0,onNavigate:c})]})]})]})}async function _n(){}_n().then(()=>{mt(r(un,{}),document.getElementById("root"))});
